---
import { Image } from 'astro:assets';

import galleryImage1 from '../assets/services/Leviton Smart Panel.jpg';
import galleryImage2 from '../assets/services/ev-charging/level-2-tesla.jpeg';

import Anchor from '../components/Anchor.astro';

const services = [
	{
		title: 'EV Charger Installation',
		description: 'Professional electric vehicle charging stations for residential and commercial properties.',
		image: galleryImage2,
		features: ['Level 2 Charging', 'Smart Scheduling', 'Weather Resistant'],
		url: '/services/ev-charging',
	},
	{
		title: 'Leviton Smart Panel',
		description: 'Advanced smart electrical panels with remote monitoring and energy management capabilities.',
		image: galleryImage1,
		features: ['Remote Control', 'Energy Monitoring', 'Smart Home Integration'],
		url: '/services/electrical-panel',
	},
	/*
	{
		title: 'Underground Utilities',
		description:
			'Expert installation and repair of underground electrical systems for residential and commercial properties.',
		image: galleryImage2,
		features: ['Trenching', 'Conduit Installation', 'Utility Mapping'],
		url: '/services/underground-utilities',
	},*/
];

services.forEach((service, index) => {
	if (!service.title || !service.description || !service.url) {
		console.warn(`Service at index ${index} is missing required fields`);
	}
	if (!service.features || service.features.length === 0) {
		console.warn(`Service "${service.title}" has no features`);
	}
});
---

<section class="relative py-8 sm:py-12 md:py-16 lg:py-20 bg-gradient-to-br from-gray-50 to-gray-100 overflow-hidden">
	<div class="relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
		<div class="text-center mb-8 sm:mb-12 md:mb-16 max-w-4xl mx-auto">
			<h2
				class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black text-gray-900 mb-4 sm:mb-6 leading-tight"
			>
				Your Reliable Commercial and
				<span class="relative inline-block">
					<span
						class="bg-gradient-to-r bg-clip-text text-transparent luminance-stroke stroke"
					>
						Residential Electricians
					</span>
				</span>
			</h2>
			<p class="text-sm sm:text-base md:text-lg lg:text-xl text-gray-600 leading-relaxed max-w-3xl mx-auto">
				Battle Electric is your one-stop electrical services company. We offer expert electrical solutions for
				residential and commercial properties in <strong class="text-gray-800 font-semibold"
					>Miami-Dade, Broward, and Monroe County, Florida</strong
				>. From panel installations and repairs to safety inspections, you can rely on us for comprehensive
				services that meet all your electrical needs.
			</p>
		</div>
		<div
			class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 md:gap-8 mb-8 sm:mb-12 md:mb-16 place-items-center"
		>
			{
				services.map((service, index) => (
					<article
						class="group lg:max-w-[400px] bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl shadow-lg hover:shadow-2xl border border-white/50 overflow-hidden transition-all duration-300 hover:-translate-y-2 focus-within:ring-2 focus-within:ring-battle-yellow/50"
						role="article"
						aria-labelledby={`service-title-${index}`}
					>
						<div class="relative h-36 sm:h-40 md:h-48 overflow-hidden">
							<Image
								src={service.image}
								width={400}
								height={300}
								alt={`${service.title} - Professional electrical installation by Battle Electric in Miami-Dade County`}
								loading={index === 0 ? 'eager' : 'lazy'}
								sizes="(max-width: 640px) 100vw, (max-width: 768px) 50vw, (max-width: 1024px) 33vw, 400px"
								class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
							/>
							<div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
						</div>

						<div class="p-3 sm:p-4 md:p-6">
							<h3
								id={`service-title-${index}`}
								class="text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-2 sm:mb-3 group-hover:text-gray-700 transition-colors duration-300 line-clamp-2"
							>
								{service.title}
							</h3>

							<p class="text-xs sm:text-sm md:text-base text-gray-600 leading-relaxed mb-3 sm:mb-4 line-clamp-3">
								{service.description}
							</p>

							<ul class="space-y-1 sm:space-y-1.5 md:space-y-2 mb-3 sm:mb-4 md:mb-6" role="list">
								{service.features.map((feature) => (
									<li
										class="flex items-start gap-2 sm:gap-3 text-xs sm:text-sm text-gray-600"
										role="listitem"
									>
										<span class="flex-1">{feature}</span>
									</li>
								))}
							</ul>

							<a
								href={service.url}
								class="block w-full text-center px-3 sm:px-4 md:px-6 py-2 sm:py-2.5 md:py-3 bg-battle-yellow hover:bg-battle-yellow-hover text-black font-semibold text-xs sm:text-sm md:text-base rounded-lg transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5 focus:outline-none focus:ring-4 focus:ring-battle-yellow/50 focus:ring-offset-2"
								aria-label={`Learn more about ${service.title} services`}
							>
								Explore Service
							</a>
						</div>
					</article>
				))
			}
		</div>

		<div class="grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 md:gap-8 mb-8 sm:mb-12 md:mb-16">
			<div
				class="text-center p-3 sm:p-4 md:p-6 bg-white/60 backdrop-blur-sm rounded-xl border border-white/50 hover:bg-white/70 transition-colors duration-300"
			>
				<div class="text-2xl sm:text-3xl md:text-4xl font-black text-battle-yellow mb-1 sm:mb-2 stroke">
					35+
				</div>
				<div class="text-xs sm:text-sm font-medium text-gray-600">Years Experience</div>
			</div>
			<div
				class="text-center p-3 sm:p-4 md:p-6 bg-white/60 backdrop-blur-sm rounded-xl border border-white/50 hover:bg-white/70 transition-colors duration-300"
			>
				<div class="text-2xl sm:text-3xl md:text-4xl font-black text-battle-yellow mb-1 sm:mb-2 stroke">
					100%
				</div>
				<div class="text-xs sm:text-sm font-medium text-gray-600">Licensed & Insured</div>
			</div>
			<div
				class="text-center p-3 sm:p-4 md:p-6 bg-white/60 backdrop-blur-sm rounded-xl border border-white/50 hover:bg-white/70 transition-colors duration-300"
			>
				<div class="text-2xl sm:text-3xl md:text-4xl font-black text-battle-yellow mb-1 sm:mb-2 stroke">
					24 / 7
				</div>
				<div class="text-xs sm:text-sm font-medium text-gray-600">Emergency Service</div>
			</div>
		</div>

		<div class="text-center pt-6 sm:pt-8 border-t border-gray-200">
			<Anchor />
		</div>
	</div>
</section>

<style>
	.luminance-stroke {
		position: relative;
		display: inline-block;
		font-weight: 900;
		color: #f5ee31;
		line-height: 1;
	}

	.luminance-stroke::before {
		content: attr(data-text);
		position: absolute;
		top: 0;
		left: 0;
		z-index: -1;
		color: black; 
		-webkit-text-stroke: 6px black; 
		text-stroke: 6px black;
	}
	.stroke {
		-webkit-text-stroke: 3px black;
		paint-order: stroke fill;
	}

	.line-clamp-2 {
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}

	.line-clamp-3 {
		display: -webkit-box;
		-webkit-line-clamp: 3;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}

	a:focus-visible {
		outline: 3px solid var(--color-battle-yellow);
		outline-offset: 2px;
		border-radius: 0.375rem;
	}

	@media (hover: none) {
		.group:hover .group-hover\:scale-110 {
			transform: none;
		}

		.hover\:-translate-y-2:hover {
			transform: none;
		}
	}

	@media (prefers-reduced-motion: reduce) {
		*,
		*::before,
		*::after {
			animation-duration: 0.01ms !important;
			animation-iteration-count: 1 !important;
			transition-duration: 0.01ms !important;
			scroll-behavior: auto !important;
		}
	}

	@media (prefers-contrast: high) {
		.bg-battle-yellow {
			background-color: #000;
			color: #fff;
		}

		.text-battle-yellow {
			color: #000;
		}
	}

	@media (max-width: 380px) {
		.container {
			padding-left: 1rem;
			padding-right: 1rem;
		}
	}

	.group {
		contain: layout style paint;
	}
</style>
